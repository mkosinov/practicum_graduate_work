# Диплопная проектная работа: интеграция голосового ассистента с кинотеатром

## Структура проекта

В репозитории находится микросервис голосового ассистента.
assistant_api - API микросервиса
nginx - балансировщик нагрузки
docs - схемы микросервиса

## Работа микросервиса

### Запуск MongoDB

Для работы сервиса необходимо предварительно настроить кластер MongoDB.

Порядок действий:

* Зайти в папку <b>services/assistant/mongo</b>, создать файл .env по примеру файла .env.example и выполнить команду:

```
docker-compose up -d
```

* Затем выполнить команду, которая выполнит первичную настройку кластера MongoDB:

```
make mongo-config
```

* Зайти в папку services/assistant/assistant_api/src/ и внести в файл config.toml данные для корректно работы с кластером MongoDB (пример приведен в том же файле).

После этого можно запускать приложение FastAPI. При старте произойдет инициализации БД и создание необходимых коллекций.

### Запуск остальных сервисов

Для работы микросервиса необходимо предварительно запустить сервис moviesAPI и указать его URL в конфигурационном файле /assistant_api/src/config.toml

Для целей разработки и тестирования запуск микросервиса можно сделать следующим образом:

1. запустить микросервис с помощью команды `docker compose up`
2. запустить утилиту xTunnel[https://xtunnel.ru/], чтобы прокинуть локальный сервер в интернет `./xTunnel 80`
3. создать новый навык Алисы `https://dialogs.yandex.ru/`
4. в настройках webhook указать https адрес сгенерированный на шаге 2
5. на вкладке тестирование можно отправить запросы
